import{j as D,M as y,R as j,B as A,d as k,E as O,s as w,i as R,c as m,n as z,m as M,a as T,b as E,e as V,f as U,g as B,p as F}from"./makeScene2D-4ae94d89.js";import{u as f,f as I,t as L,w as d,D as W,g as H,b as h,V as N}from"./Vector-e62a7f0b.js";function $(a){if(!C()||a.startsWith("/cors-proxy/"))return a;const e=new URL(window.location.toString());try{const t=new URL(a,e);if(!t.protocol.startsWith("http")||e.host===t.host||!q(t.host))return a}catch{return a}return`/cors-proxy/${encodeURIComponent(a)}`}function q(a){const e=J();if(e.length===0)return!0;for(const t of e)if(t.toLowerCase().trim()===a)return!0;return!1}function C(){return!1}let p;function J(){return{}.VITEST!=="true"&&p?[...p]:(p=function(){if(!C()||!{VITE_MC_PROXY_ENABLED:"false",BASE_URL:"/animations/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})return[];const e={}.VITE_MC_PROXY_ALLOW_LIST??"[]",t=JSON.parse(e);Array.isArray(t)||f().error("Parsed Allow List expected to be an Array, but is "+typeof t);const n=[];for(const s of t){if(typeof s!="string"){f().warn("Unexpected Value in Allow List: "+s+". Expected a String. Skipping.");continue}n.push(s)}return n}(),[...p])}I(P,L());function*P(a,e){for(let t=0;t<a;t++){const n=e(t);n?yield*n:yield}}I(v,L());function*v(a,...e){for(const t of e)yield t,yield*d(a);yield*D(...e)}let S;S??(S=new y("me",!1));S.loadData({version:0,shared:{background:"rgba(0,0,0,0)",range:[0,null],size:{x:240,y:240},audioOffset:0},preview:{fps:30,resolutionScale:1},rendering:{fps:60,resolutionScale:1,colorSpace:"srgb",exporter:{name:"@motion-canvas/core/image-sequence",options:{fileType:"image/png",quality:100,groupByScene:!1}}}});const X=S;let b;b??(b=new y("me",!1));b.loadData({version:0,timeEvents:[],seed:2637529839});const Y=b;var l=globalThis&&globalThis.__decorate||function(a,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(a,e,t,n);else for(var g=a.length-1;g>=0;g--)(r=a[g])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},u;let i=u=class extends j{constructor(e){super(e),"src"in e||f().warn({message:"No source specified for the image",remarks:`<p>The image won&#39;t be visible unless you specify a source:</p>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> myImage <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./example.png&#x27;</span>;
<span class="hljs-comment">// ...</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{myImage}</span> /&gt;</span></span>;
</code></pre><p>If you did this intentionally, and don&#39;t want to see this warning, set the <code>src</code>
property to <code>null</code>:</p>
<pre><code class="language-tsx">&lt;<span class="hljs-title class_">Img</span> src={<span class="hljs-literal">null</span>} /&gt;
</code></pre><p><a href='https://motioncanvas.io/docs/media#images' target='_blank'>Learn more</a> about working with
images.</p>
`,inspect:this.key})}desiredSize(){const e=super.desiredSize();if(e.x===null&&e.y===null){const t=this.image();return{x:t.naturalWidth,y:t.naturalHeight}}return e}image(){const e=this.src();let t="",n="";if(e){n=$(e);const o=new URL(n,window.location.origin);if(o.origin===window.location.origin){const r=this.view().assetHash();o.searchParams.set("asset-hash",r)}t=o.toString()}let s=u.pool[n];return s||(s=document.createElement("img"),s.crossOrigin="anonymous",s.src=t,u.pool[n]=s),s.complete||W.collectPromise(new Promise((o,r)=>{s.addEventListener("load",o),s.addEventListener("error",()=>r(new H({message:"Failed to load an image",remarks:`The <code>src</code> property was set to:
<pre><code>${e}</code></pre>
...which resolved to the following url:
<pre><code>${t}</code></pre>
Make sure that source is correct and that the image exists.<br/>
<a target='_blank' href='https://motioncanvas.io/docs/media#images'>Learn more</a>
about working with images.`,inspect:this.key})))})),s}imageCanvas(){const e=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});if(!e)throw new Error("Could not create an image canvas");return e}filledImageCanvas(){const e=this.imageCanvas(),t=this.image();return e.canvas.width=t.naturalWidth,e.canvas.height=t.naturalHeight,e.imageSmoothingEnabled=this.smoothing(),e.drawImage(t,0,0),e}draw(e){this.drawShape(e);const t=this.alpha();if(t>0){const n=A.fromSizeCentered(this.computedSize());e.save(),e.clip(this.getPath()),t<1&&(e.globalAlpha*=t),e.imageSmoothingEnabled=this.smoothing(),k(e,this.image(),n),e.restore()}this.clip()&&e.clip(this.getPath()),this.drawChildren(e)}applyFlex(){super.applyFlex();const e=this.image();this.element.style.aspectRatio=(this.ratio()??e.naturalWidth/e.naturalHeight).toString()}getColorAtPoint(e){const t=this.computedSize(),n=this.naturalSize(),s=new h(e).add(this.computedSize().scale(.5)).mul(n.div(t).safe);return this.getPixelColor(s)}naturalSize(){const e=this.image();return new h(e.naturalWidth,e.naturalHeight)}getPixelColor(e){const t=this.filledImageCanvas(),n=new h(e),s=t.getImageData(n.x,n.y,1,1).data;return new O({r:s[0],g:s[1],b:s[2],a:s[3]/255})}collectAsyncResources(){super.collectAsyncResources(),this.image()}};i.pool={};l([w()],i.prototype,"src",void 0);l([R(1),w()],i.prototype,"alpha",void 0);l([R(!0),w()],i.prototype,"smoothing",void 0);l([m()],i.prototype,"image",null);l([m()],i.prototype,"imageCanvas",null);l([m()],i.prototype,"filledImageCanvas",null);l([m()],i.prototype,"naturalSize",null);i=u=l([z("Img")],i);const x="/animations/me1.png",G="/animations/me2.png",K="/animations/me3.png",c=M(function*(a){const e=V();a.add(T(i,{ref:e,src:x,width:"100%"})),yield*P(10,function*(t){yield*d(1),Math.random()<.7&&(yield*Z(e)),yield*d(2),Math.random()<.5&&(yield*d(1)),Math.random()<.3&&(yield*Q(e),yield*d(1))})});function*Q(a){yield*v(1,E(a().src(G,0),a().rotation(3,0),a().x(3,0)),E(a().src(x,0),a().rotation(0,0),a().x(0,0)))}function*Z(a){yield*v(.1,a().src(K,0),a().src(x,0))}c.name="me";Y.attach(c.meta);c.onReplaced??(c.onReplaced=new N(c.config));const ee=U({scenes:[c]}),_=new y("settings","\0settings");_.loadData({version:1,appearance:{color:"rgb(255,255,255)",font:!1,coordinates:!0},defaults:{background:"rgb(0,0,0)",size:{x:1920,y:1080}}});const ne=B("me",{core:"3.13.0",two:"3.13.0",ui:"3.13.0",vitePlugin:"3.13.0"},[F()],ee,X,_);export{ne as default};
